jQuery.fn.layered=function(n){var n=jQuery.extend({background:!1,position:!1,distance:1,startScrollY:0,endScrollY:Infinity,startScrollX:0,endScrollX:Infinity},n);return jQuery.type(jQuery.layeredData)=="array"?jQuery.layeredData.push({what:jQuery(this),o:n}):(jQuery.layeredData=[{what:jQuery(this),o:n}],jQuery(window).scroll(function(){jQuery.each(jQuery.layeredData,function(){var s={},t={},u,f,r,i;if(this.o.position==!0&&(this.o.endScrollY>=jQuery(window).scrollTop()&&jQuery(window).scrollTop()>=this.o.startScrollY&&(t=jQuery.extend(t,{top:Length.toPx(jQuery(this.what)[0],jQuery(this.what).data("hierarchyAndOrder").position.top)+(-jQuery(window).scrollTop()+this.o.startScrollY)*Math.pow(this.o.distance,-1)})),this.o.endScrollX>=jQuery(window).scrollLeft()&&jQuery(window).scrollLeft()>=this.o.startScrollX&&(t=jQuery.extend(t,{left:Length.toPx(jQuery(this.what)[0],jQuery(this.what).data("hierarchyAndOrder").position.left)+(-jQuery(window).scrollLeft()+this.o.startScrollX)*Math.pow(this.o.distance,-1)}))),this.o.background==!0){u=!1,f=!1,this.o.endScrollY>=jQuery(window).scrollTop()&&jQuery(window).scrollTop()>=this.o.startScrollY&&(f=0-jQuery(window).scrollTop()+this.o.startScrollY),this.o.endScrollX>=jQuery(window).scrollLeft()&&jQuery(window).scrollTop()>=this.o.startScrollX&&(u=0-jQuery(window).scrollLeft()+this.o.startScrollX);var n=jQuery(this.what).data("hierarchyAndOrder").backgroundPosition,o=n.xI+n.xU,e=n.yI+n.yU;if(u!=!1){r=0;switch(jQuery.type(n.xU)){case"string":switch(n.xU){case"%":r=jQuery(this.what).outerWidth()*parseFloat(n.xI)*.01;break;case"":break;default:r=Length.toPx(jQuery(this.what)[0],n.xI+n.xU)}}o=r+u*Math.pow(this.o.distance,-1)+"px"}if(f!=!1){i=0;switch(jQuery.type(n.xU)){case"string":switch(n.yU){case"%":i=jQuery(this.what).outerHeight()*parseFloat(n.yI)*.01;break;case"":break;default:i=Length.toPx(jQuery(this.what)[0],n.yI+n.yU)}}e=i+f*Math.pow(this.o.distance,-1)+"px"}t=jQuery.extend(t,{"background-position":o+" "+e})}jQuery(this.what).css(t).animate(s,{queue:!1,duration:2,easing:"linear"})})})),jQuery(this).data("hierarchyAndOrder",{position:{top:jQuery(this).css("top"),left:jQuery(this).css("left"),right:jQuery(this).css("right"),bottom:jQuery(this).css("bottom")},backgroundPosition:{full:/(\d+|left|center|right)(.*) (\d+|top|center|bottom)(.*)/.exec(jQuery(this).css("background-position"))[0],xI:/(\d+|left|center|right)(.*) (\d+|top|center|bottom)(.*)/.exec(jQuery(this).css("background-position"))[1],xU:/(\d+|left|center|right)(.*) (\d+|top|center|bottom)(.*)/.exec(jQuery(this).css("background-position"))[2],yI:/(\d+|left|center|right)(.*) (\d+|top|center|bottom)(.*)/.exec(jQuery(this).css("background-position"))[3],yU:/(\d+|left|center|right)(.*) (\d+|top|center|bottom)(.*)/.exec(jQuery(this).css("background-position"))[4]}}),jQuery(window).trigger("scroll"),jQuery(this)};