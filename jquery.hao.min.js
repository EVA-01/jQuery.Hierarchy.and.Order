jQuery.fn.layered=function(n){var n=jQuery.extend({background:!1,position:!1,distance:1,startScrollY:0,endScrollY:Infinity,startScrollX:0,endScrollX:Infinity},n);return jQuery.type(jQuery.layeredData)=="array"?jQuery.layeredData.push({what:jQuery(this),o:n}):(jQuery.layeredData=[{what:jQuery(this),o:n}],jQuery(window).scroll(function(){jQuery.each(jQuery.layeredData,function(){var e,t,i,r,u,f;if(jQuery(this.what.is(":visible"))){if(e={},t={},this.o.position==!0&&(this.o.endScrollY>=jQuery(window).scrollTop()&&jQuery(window).scrollTop()>=this.o.startScrollY&&(t=jQuery.extend(t,{top:jQuery(this.what).data("hierarchyAndOrder").position.top+(-jQuery(window).scrollTop()+this.o.startScrollY)*Math.pow(this.o.distance,-1)})),this.o.endScrollX>=jQuery(window).scrollLeft()&&jQuery(window).scrollLeft()>=this.o.startScrollX&&(t=jQuery.extend(t,{left:jQuery(this.what).data("hierarchyAndOrder").position.left+(-jQuery(window).scrollLeft()+this.o.startScrollX)*Math.pow(this.o.distance,-1)}))),this.o.background==!0&&this.what.css("background-image")!=undefined){i=!1,r=!1,this.o.endScrollY>=jQuery(window).scrollTop()&&jQuery(window).scrollTop()>=this.o.startScrollY&&(r=0-jQuery(window).scrollTop()+this.o.startScrollY),this.o.endScrollX>=jQuery(window).scrollLeft()&&jQuery(window).scrollTop()>=this.o.startScrollX&&(i=0-jQuery(window).scrollLeft()+this.o.startScrollX);var n=jQuery(this.what).data("hierarchyAndOrder").backgroundPosition,o=n.xI+n.xU,s=n.yI+n.yU;if(i!=!1){u=0;switch(jQuery.type(n.xU)){case"string":switch(n.xU){case"%":u=jQuery(this.what).outerWidth()*parseFloat(n.xI)*.01;break;case"":break;default:u=n.xC}}o=u+i*Math.pow(this.o.distance,-1)+"px"}if(r!=!1){f=0;switch(jQuery.type(n.xU)){case"string":switch(n.yU){case"%":f=jQuery(this.what).outerHeight()*parseFloat(n.yI)*.01;break;case"":break;default:f=n.yC}}s=f+r*Math.pow(this.o.distance,-1)+"px"}t=jQuery.extend(t,{"background-position":o+" "+s})}jQuery(this.what).css(t).animate(e,{queue:!1,duration:2,easing:"linear"})}})})),jQuery(this).data("hierarchyAndOrder",{position:{top:Length.toPx(jQuery(this)[0],jQuery(this).css("top")),left:Length.toPx(jQuery(this)[0],jQuery(this).css("left")),right:jQuery(this).css("right"),bottom:jQuery(this).css("bottom")},backgroundPosition:{full:/(\d+|left|center|right)(.*) (\d+|top|center|bottom)(.*)/.exec(jQuery(this).css("background-position"))[0],xI:/(\d+|left|center|right)(.*) (\d+|top|center|bottom)(.*)/.exec(jQuery(this).css("background-position"))[1],xU:/(\d+|left|center|right)(.*) (\d+|top|center|bottom)(.*)/.exec(jQuery(this).css("background-position"))[2],yI:/(\d+|left|center|right)(.*) (\d+|top|center|bottom)(.*)/.exec(jQuery(this).css("background-position"))[3],yU:/(\d+|left|center|right)(.*) (\d+|top|center|bottom)(.*)/.exec(jQuery(this).css("background-position"))[4],xC:Length.toPx(jQuery(this)[0],/(\d+|left|center|right)(.*) (\d+|top|center|bottom)(.*)/.exec(jQuery(this).css("background-position"))[1]+/(\d+|left|center|right)(.*) (\d+|top|center|bottom)(.*)/.exec(jQuery(this).css("background-position"))[2]),yC:Length.toPx(jQuery(this)[0],/(\d+|left|center|right)(.*) (\d+|top|center|bottom)(.*)/.exec(jQuery(this).css("background-position"))[3]+/(\d+|left|center|right)(.*) (\d+|top|center|bottom)(.*)/.exec(jQuery(this).css("background-position"))[4])}}),jQuery(window).trigger("scroll"),jQuery(this)};